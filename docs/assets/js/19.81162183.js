(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{710:function(t,s,a){"use strict";a.r(s);var e=a(62),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h3",{attrs:{id:"dc3-mqtt-驱动模块"}},[t._v("DC3 Mqtt 驱动模块 "),s("a",{staticClass:"header-anchor",attrs:{href:"#dc3-mqtt-驱动模块"}},[t._v("#")])]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("位置")]),t._v("：iot-dc3\\dc3-driver\\dc3-driver-mqtt")]),t._v(" "),s("p",[s("strong",[t._v("依赖服务")]),t._v("（参考 Idea 开发环境启动即可）：dc3-mysql、dc3-mongo、dc3-redis、dc3-rabbitmq、dc3-center-register、dc3-center-manager、dc3-center-data、dc3-center-auth、dc3-center-gateway、dc3-web")]),t._v(" "),s("p",[s("strong",[t._v("开源工具")]),t._v("：Spring Cloud")]),t._v(" "),s("p",[s("strong",[t._v("Mqtt")]),t._v("：基于客户端-服务器的消息发布/订阅传输协议。MQTT 协议是轻量、简单、开放和易于实现的，这些特点使它适用范围非常广泛。在很多情况下，包括受限的环境中，如：机器与机器（M2M）通信和物联网（IoT）。其在，通过卫星链路通信传感器、偶尔拨号的医疗设备、智能家居、及一些小型化设备中已广泛使用。")])]),t._v(" "),s("h3",{attrs:{id:"配置文件"}},[t._v("配置文件 "),s("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[t._v("#")])]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("位置")]),t._v("：iot-dc3\\dc3-driver\\dc3-driver-mqtt\\src\\main\\resources\\application.yml")])]),t._v(" "),s("h4",{attrs:{id:"_1-mqtt-服务器连接配置"}},[t._v("1. mqtt 服务器连接配置 "),s("a",{staticClass:"header-anchor",attrs:{href:"#_1-mqtt-服务器连接配置"}},[t._v("#")])]),t._v(" "),s("blockquote",[s("p",[s("em",[t._v("mqtt 用于配置连接一个 Mqtt 服务所需要的基本参数")])])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mqtt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用户名")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("username")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" dc3\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 密码")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("password")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" dc3\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Mqtt 服务URL")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" tcp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//dc3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("rabbitmq"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1883")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# qos（0,1,2），与下面的 topics 一一对应")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("qos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# topics，订阅主题")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("topics")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" mqtt/group/device/"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 客户端连接标识")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" dc3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("mqtt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("client\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 默认配置，用于调试使用，创建一个 dc3-mqtt-topic 主题")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("topic")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" dc3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("mqtt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("topic\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("qos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置是否接收默认主题发送的数据")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("receive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 心跳和超时设置")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("keep-alive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("completion-timeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),t._v("\n")])])]),s("h4",{attrs:{id:"_2-driver-point-attribute"}},[t._v("2. driver.point-attribute "),s("a",{staticClass:"header-anchor",attrs:{href:"#_2-driver-point-attribute"}},[t._v("#")])]),t._v(" "),s("blockquote",[s("p",[s("em",[t._v("point-attribute 用于配置读取一个 Mqtt 点位值所需要的基本参数")])]),t._v(" "),s("p",[s("strong",[t._v("读取一个 Mqtt 服务的点位值需要：指令 Topic、指令 Qos，那么 "),s("code",[t._v("dc3-mqtt")]),t._v(" 驱动模块此处的 "),s("code",[t._v("point-attribute")]),t._v(" 就应该如下:")])])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("point-attribute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("displayName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 指令Topic\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" commandTopic\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" commandTopic\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 测点/设备接收下行指令的Mqtt主题\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("displayName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 指令Qos\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" commandQos\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" int\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 测点/设备接收下行指令的Mqtt主题的Qos\n")])])]),s("h4",{attrs:{id:"_3-driver-schedule"}},[t._v("3. driver.schedule "),s("a",{staticClass:"header-anchor",attrs:{href:"#_3-driver-schedule"}},[t._v("#")])]),t._v(" "),s("blockquote",[s("p",[s("em",[t._v("schedule 用于设置 读 和 自定义方法的调度")])]),t._v(" "),s("p",[s("strong",[t._v("read")]),t._v("：用于配置周期性调用 iot-dc3\\dc3-driver\\dc3-driver-mqtt\\src\\main\\java\\com\\dc3\\driver\\service\\impl\\CustomDriverServiceImpl.java （read 方法）")]),t._v(" "),s("p",[s("strong",[t._v("custom")]),t._v("：用于配置周期性调用 iot-dc3\\dc3-driver\\dc3-driver-mqtt\\src\\main\\java\\com\\dc3\\driver\\service\\impl\\CustomDriverServiceImpl.java（schedule 方法）")]),t._v(" "),s("p",[s("strong",[t._v("enable")]),t._v("：是否启动")]),t._v(" "),s("p",[s("strong",[t._v("corn")]),t._v("：corn 表达式，用于设置调度规则")])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("schedule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("read")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("corn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0/30 * * * * ?'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("custom")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("corn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0/5 * * * * ?'")]),t._v("\n")])])]),s("h3",{attrs:{id:"小试牛刀"}},[t._v("小试牛刀 "),s("a",{staticClass:"header-anchor",attrs:{href:"#小试牛刀"}},[t._v("#")])]),t._v(" "),s("h4",{attrs:{id:"_1-启动依赖服务"}},[t._v("1. 启动依赖服务 "),s("a",{staticClass:"header-anchor",attrs:{href:"#_1-启动依赖服务"}},[t._v("#")])]),t._v(" "),s("ul",[s("li",[t._v("参考 Idea 开发环境启动 dc3-mysql、dc3-mongo、dc3-redis、dc3-rabbitmq、dc3-center-register、dc3-center-manager、dc3-center-data、dc3-center-auth、dc3-web")]),t._v(" "),s("li",[t._v("启动 dc3-driver-mqtt")])]),t._v(" "),s("h4",{attrs:{id:"_2-启动-mqtt-调试工具"}},[t._v("2. 启动 Mqtt 调试工具 "),s("a",{staticClass:"header-anchor",attrs:{href:"#_2-启动-mqtt-调试工具"}},[t._v("#")])]),t._v(" "),s("p",[t._v("安装并启动 Mqtt.fx 软件")]),t._v(" "),s("p",[t._v("下载链接："),s("a",{attrs:{href:"https://pan.baidu.com/s/1zcdKpBiYLOdwanqxn-GZWA",target:"_blank",rel:"noopener noreferrer"}},[t._v("百度云盘 Mqtt.fx"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("验证码："),s("code",[t._v("wona")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-2.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_3-驱动"}},[t._v("3. 驱动 "),s("a",{staticClass:"header-anchor",attrs:{href:"#_3-驱动"}},[t._v("#")])]),t._v(" "),s("p",[t._v("切换到 ''"),s("strong",[t._v("驱动")]),t._v('" 菜单，当前 '),s("code",[t._v("Mqtt")]),t._v(" 启动启动成功，并处于 "),s("strong",[t._v("在线")]),t._v(" 状态")]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-3.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_4-驱动属性"}},[t._v("4. 驱动属性 "),s("a",{staticClass:"header-anchor",attrs:{href:"#_4-驱动属性"}},[t._v("#")])]),t._v(" "),s("p",[t._v("切换到 ''"),s("strong",[t._v("驱动属性")]),t._v('" 菜单，当前 驱动属性 , Mqtt 模块是没有驱动配置，如图列表为空')]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-4.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_5-位号属性"}},[t._v("5. 位号属性 "),s("a",{staticClass:"header-anchor",attrs:{href:"#_5-位号属性"}},[t._v("#")])]),t._v(" "),s("p",[t._v("切换到 “"),s("strong",[t._v("位号属性")]),t._v("” 菜单，当前 位号属性 列表如下")]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-5.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_6-模板"}},[t._v("6. 模板 "),s("a",{staticClass:"header-anchor",attrs:{href:"#_6-模板"}},[t._v("#")])]),t._v(" "),s("p",[t._v("切换到 “"),s("strong",[t._v("模板")]),t._v("” 菜单，新建一个 "),s("code",[t._v("私有")]),t._v(" 的 "),s("code",[t._v("MqttProfile")]),t._v(" 模板，如下")]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-6.png",alt:""}})]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-7.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_7-位号"}},[t._v("7. 位号 "),s("a",{staticClass:"header-anchor",attrs:{href:"#_7-位号"}},[t._v("#")])]),t._v(" "),s("p",[t._v("切换到 “"),s("strong",[t._v("位号")]),t._v("” 菜单，为刚刚新建的 "),s("code",[t._v("模板")]),t._v(" 配置待读取的 位号，这里以一个 "),s("code",[t._v("Integer")]),t._v(" 类型的为例，如下")]),t._v(" "),s("blockquote",[s("p",[t._v("同时也需要在 Mqtt.fx 软件中设置一下")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-8.png",alt:""}})]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-9.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_8-分组"}},[t._v("8. 分组 "),s("a",{staticClass:"header-anchor",attrs:{href:"#_8-分组"}},[t._v("#")])]),t._v(" "),s("p",[t._v("切换到 “"),s("strong",[t._v("分组")]),t._v("” 菜单，新建一个设备分组，如下")]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-10.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_9-设备"}},[t._v("9. 设备 "),s("a",{staticClass:"header-anchor",attrs:{href:"#_9-设备"}},[t._v("#")])]),t._v(" "),s("p",[t._v("切换到 “"),s("strong",[t._v("设备")]),t._v("” 菜单，在刚刚新建的分组下，新建一个设备，如下")]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-11.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_10-位号配置"}},[t._v("10. 位号配置 "),s("a",{staticClass:"header-anchor",attrs:{href:"#_10-位号配置"}},[t._v("#")])]),t._v(" "),s("blockquote",[s("p",[t._v("提示：如果不需要控制设备，该位号配置可以不用配置")])]),t._v(" "),s("p",[t._v("切换到 “"),s("strong",[t._v("位号配置")]),t._v("” 菜单，为新建的 "),s("code",[t._v("设备")]),t._v(" ，配置 "),s("code",[t._v("位号")]),t._v(" 的的 "),s("strong",[t._v("属性值")]),t._v("，从而是 "),s("code",[t._v("dc3-mqtt")]),t._v(" 模块能下发控制指令到 "),s("code",[t._v("Mqtt.fx")]),t._v(" 软件，如下")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("指令 Topic")]),t._v("：用于向设备发送控制指令的 topic，例如： "),s("code",[t._v("dc3/mqtt/commad/device_1")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-12.png",alt:""}})]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("指令 Qos")]),t._v("：用于向设备发送控制指令的 topic 的 qos，例如：0")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-13.png",alt:""}})]),t._v(" "),s("ul",[s("li",[t._v("以上的 命名空间和位号均配置完之后，列表如下")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-14.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_11-mqtt-fx-设置"}},[t._v("11. Mqtt.fx 设置 "),s("a",{staticClass:"header-anchor",attrs:{href:"#_11-mqtt-fx-设置"}},[t._v("#")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-15.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-16.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-17.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-18.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_12-数据"}},[t._v("12. 数据 "),s("a",{staticClass:"header-anchor",attrs:{href:"#_12-数据"}},[t._v("#")])]),t._v(" "),s("p",[t._v("切换到 “数据” 菜单，在 "),s("code",[t._v("Mqtt.fx")]),t._v(" 中 publish 就会采集到一条数据")]),t._v(" "),s("p",[s("strong",[t._v("发送数据：")])]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("Public Topic")]),t._v(" 填写 "),s("code",[t._v("driver/dc3-driver-mqtt_default/device/设备ID")])]),t._v(" "),s("p",[t._v("请务必替换设备 ID 和位号 ID，点击设备标题和位号标题能获取到对应的ID。")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"payload"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{ \\"deviceId\\": 1633872950490894337, \\"pointId\\": 1633872856706256897, \\"value\\": 1212 }"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-19.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-20.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_13-下发控制指令到设备"}},[t._v("13. 下发控制指令到设备 "),s("a",{staticClass:"header-anchor",attrs:{href:"#_13-下发控制指令到设备"}},[t._v("#")])]),t._v(" "),s("p",[s("code",[t._v("Mqtt.fx")]),t._v(" 配置如下：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-21.png",alt:""}})]),t._v(" "),s("p",[t._v("使用 接口调用指令下发，向设备端写入数据")]),t._v(" "),s("p",[t._v("请注意，设备 ID（deviceId）和位号 ID（pointId），如实际数据库中的数据为准，以下为例子：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-22.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-23.png",alt:""}})]),t._v(" "),s("p",[t._v("在 "),s("code",[t._v("Mqtt.fx")]),t._v(" 中收到发送过来的控制指令，如图：\n"),s("img",{attrs:{src:"/assets/images/dc3/driver/mqtt/mqtt-24.png",alt:""}})])])}),[],!1,null,null,null);s.default=r.exports}}]);